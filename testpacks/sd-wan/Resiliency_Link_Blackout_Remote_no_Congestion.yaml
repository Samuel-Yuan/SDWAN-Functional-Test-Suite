testcase:
  id: sd-wan.resiliency_link_blackout.002
  name: 'Resiliency_Link_Blackout_Remote_no_Congestion'
  description: 'Resiliency Link Blackout Remote no Congestion'
  objective: 'Validate DUT can steer traffic from Internet link to MPLS link if link blackout was detected on Internet link and vice versa.'
  run_info:
    equipment:
      - type: pga
        count: 3
      - type: router
        count: 1
    duration: 600
    timeout: 1200
    testbed: sd-wan/3Stc1Sne2Dut_Type01.yaml
    script_module: testpacks.sd-wan.Resiliency_Link_Blackout_Remote_no_Congestion
    script_class: Resiliency_Link_Blackout_Remote_no_Congestion
    sne_config_file: Resiliency_Link_Blackout_Remote_no_Congestion_Sne.xml
    procedure: '1. Perform ARP on all STC devices and all stream blocks  2. Start traffic on all STC ports 3. Wait for traffic to stop 4. Check stream related results'
    initial_config: '1. Set IpAddress for interface of DutToClient to 150.0.0.2  2. Set IpAddress for interface of DutToMpls to 150.0.1.2 3. Set IpAddress for interface of DutToInternet to 150.0.2.2 3. Proper policies must be applied to DUT to steer stream 1, 4, 5, 7 towards Internet link and steer stream 2, 3, 6 ,8 towards MPLS link.'
    expected_results: '1. All ARPs are resolved successfully for procedure 1  2.All generators are started successfully 3. All stream blocks are steered towards expected link without packet loss. 4. a. Stream 1, 4, 5, 7 are received only on Internet STC port b. Stream 2, 3, 6, 8 are received only on MPLS port c. No packet los'
  owner:
    name: 'Samuel Yuan'
  version: 'Draft 0.1'
  test_type: [functional]
  test_area: 'SD-WAN Path Selection'
  dut_target: [sd-wan]
  test_suites: [smoke]
